driver:
  name: docker

transport:
  name: docker

provisioner:
  name: chef_zero

verifier:
  name: inspec

platforms:
  - name: windows
    driver:
      image: gusztavvargadr/chef-client:windows
      socket: "<%= `docker context inspect #{ENV['DOCKER_CONTEXT_WINDOWS'] || 'default'} --format {{.Endpoints.docker.Host}}`.strip %>"
    transport:
      socket: "<%= `docker context inspect #{ENV['DOCKER_CONTEXT_WINDOWS'] || 'default'} --format {{.Endpoints.docker.Host}}`.strip %>"

suites:
  - name: 2017-developer
    provisioner:
      named_run_list: 2017_developer

  - name: 2019-developer
    provisioner:
      named_run_list: 2019_developer

  - name: 2017-ssms
    provisioner:
      named_run_list: 2017_ssms

  - name: 2018-ssms
    provisioner:
      named_run_list: 2018_ssms
