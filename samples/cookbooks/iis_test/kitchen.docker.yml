driver:
  name: docker

transport:
  name: docker

provisioner:
  name: chef_zero

verifier:
  name: inspec

platforms:
  - name: windows
    driver:
      image: gusztavvargadr/chef-client:windows
      socket: "<%= `docker context inspect #{ENV['DOCKER_CONTEXT_WINDOWS'] || 'default'} --format {{.Endpoints.docker.Host}}`.strip %>"
    transport:
      socket: "<%= `docker context inspect #{ENV['DOCKER_CONTEXT_WINDOWS'] || 'default'} --format {{.Endpoints.docker.Host}}`.strip %>"

suites:
  - name: server
    provisioner:
      named_run_list: server
