driver:
  name: ec2
  region: eu-west-1
  instance_type: c7i.xlarge
  spot_price: on-demand
  ebs_optimized: true
  block_device_mappings:
    - device_name: /dev/sda1
      ebs:
        volume_type: gp3
        volume_size: 127
  tags:
    Stack: gusztavvargadr-chef
    Service: cookbooks
    Component: hashicorp

provisioner:
  max_retries: 0

verifier:
  name: inspec

platforms:
  - name: windows-2022
    driver:
      image_search:
        owner-id: "668508375233"
        name: kitchen-windows-2022-*
      tags:
        Environment: kitchen-windows-2022
    transport:
      elevated: true
    provisioner:
      max_retries: 1
      wait_for_retry: 120

  - name: ubuntu-2404
    driver:
      image_search:
        owner-id: "668508375233"
        name: kitchen-ubuntu-2404-*
      tags:
        Environment: kitchen-ubuntu-2404

  - name: ubuntu-2204
    driver:
      image_search:
        owner-id: "668508375233"
        name: kitchen-ubuntu-2204-*
      tags:
        Environment: kitchen-ubuntu-2204

suites:
  - name: default
    attributes:
      gusztavvargadr_hashicorp:
        tools:
          vagrant:latest:
          packer:latest:
          terraform:latest:
          consul-template:latest:
          consul:latest:
          vault:latest:
          nomad:latest:
